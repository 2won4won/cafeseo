<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.css" />
<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
<script type="text/javascript" src="https://unpkg.com/swiper/swiper-bundle.js"></script>
<script type="text/javascript" src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>

<style>
  .modal {
    display: none;
    width: 100vw;
    height: 100vh;
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    background-color: rgba(0, 0, 0, 0.6);
  }

  .close {
    color: #aaaaaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
  }

  .close:hover,
  .close:focus {
    color: #000;
    text-decoration: none;
    cursor: pointer;
  }

  .swiBox .img {
    width: 100vw; height: 45vh;  
    object-fit: cover; position: relative;
  }

  .swiBox .img::before {
    width: 100%;
    height: 100%;
    content: "";
    opacity: 0.3;
    position: absolute;
    top: 0px;
    left: 0px;
    right: 0px;
    bottom: 0px;
    background-color: #000;
  }
  .sandImg { background-size: 100% 100%; background-repeat: no-repeat;  }
  .sandM01 {  background: url(sandM01.jpeg); }
  .sandM02 {  background: url(sandM02.jpeg); }
  .sandM03 {  background: url(sandM03.jpeg); }
  .sandV01 {  background: url(sandV01.jpeg); }
  .sandV02 {  background: url(sandV02.jpeg); }
  .sandV03 {  background: url(sandV03.jpeg); }
  .sandD01 {  background: url(sandD01.jpeg); }
  .sandD02 {  background: url(sandD02.jpeg); }
  .sandD03 {  background: url(sandD03.jpeg); }

</style>
</head>

<!-- The Modal -->
<div id="myModal" class="modal">
  <span class="close">&times;</span>
  <div class="swiBox">
    <div class="swiper-modal">
      <div class="swiper-wrapper-modal ">
        <!-- Slides -->
        <div class="swiper-slide img sandM01 sandImg" data-type="NO.1 고기파"> </div>
        <div class="swiper-slide img sandM02 sandImg" data-type="NO.1 고기파"> </div>
        <div class="swiper-slide img sandM03 sandImg" data-type="NO.1 고기파"> </div>
        <div class="swiper-slide img sandV01 sandImg" data-type="NO.2 비건파"> </div>
        <div class="swiper-slide img sandV02 sandImg" data-type="NO.2 비건파"> </div>
        <div class="swiper-slide img sandV03 sandImg" data-type="NO.2 비건파"> </div>
        <div class="swiper-slide img sandD01 sandImg" data-type="NO.3 식단파"> </div>
        <div class="swiper-slide img sandD02 sandImg" data-type="NO.3 식단파"> </div>
        <div class="swiper-slide img sandD03 sandImg" data-type="NO.3 식단파"> </div>
      </div>
    </div>
    <!-- pagination -->
    <div class="swiper-pagination"></div>
  </div>
</div>

<script>
  // Get the modal
  // var modal = document.getElementsByClassName("modal");
  var cloneSlide = $('.swiBox .swiper-wrapper-modal ').html();
  var arraySlide = [];

  $('.swiper-modal .swiper-slide-modal').each(function (i, e) {
    arraySlide.push(e);
    console.log(arraySlide);
  })
  
  var modal = document.getElementById("myModal");
  var btn = document.querySelectorAll(".box");
  
  
  btn.forEach((el, index) => {
    el.onclick = () => {
      modal.style.display = "block";
    }
  });


  // box click 시 swiper modal`
  $('.box').click(function () {

    const type = $(this).children('div').children('.ti').text();
    console.log(type);
  
    
    $('.box').removeClass('active');
    $(this).addClass('active');
    $('.swiper-modal .swiper-wrapper-modal').empty();
    
    if (type === "Cafe SEO's 한끼") {
      $('.swiper-modal .swiper-wrapper-modal').append(cloneSlide);
    } else {
      $(arraySlide).each(function (i, e) {
        const exist = $(e).attr('data-type').indexOf(type);
        
        if (exist >= 0) {
          $('.swiper-modal .swiper-wrapper-modal').append(e);
        }
      });
    }
    /* modal swiper*/
    var swiperModal = new Swiper('.swiper-modal', {
      slidesPerView: 1,
      // spaceBetween: 30,
      loop: true,
      loopAdditionalSlides: 1,
      pagination: {
        el: '.swiper-pagination',
        clickable: true,
      },
      autoplay: {
        //시간 1000 이 1초
        delay: 3000,
        disableOnInteraction: false,
      },
    })

    swiperModal.update();
    swiperModal.slideTo(0);
  });


  // close modal
  $('.close').click(function () {
    $('.modal').css('display', 'none');
  });
  $('.modal').click(function () {
    $('.modal').css('display', 'none');
  });

    // window.onclick = function (event) {
    //   if (event.target == modal) {
    //    modal.style.display = "none";
    //   }
    // }



</script>

</body>

</html>